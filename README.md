# log-reader - Читатель логов

## Описание
**log-reader** позволяет считывать лог файлы. В результате вы получаете массив с ключами которые вы определили.
#### Пример результата
```php
$res = [
    [
        'date_time' => '2018-01-01 15:00:00',
        'text'       => 'log 1',
    ],
    [
        'date_time' => '2018-01-01 15:00:05',
        'text'       => 'log 2',
    ]
];
```

## Установка
    php composer require lander931/log-reader
    
## Использование
#### Пример исходного лога
    2018-01-01 15:00:00 log 1
    2018-01-01 15:00:05 log 2
### Чтение лога
Передать в **LogReader::read** файл лога, и функцию разбиения лога на части.
```php
$reader = LogReader::read('app.log', function($text) {
    return explode("\n", $text);
})
```
### Фомирование результата
Для добавления ключа, используйте ***addField***,
 передайте название ключа и функцию которая вернёт значение. На вход, функция принимает текст одной записи лога.
```php
$reader
    ->addField('date_time', function($note) {
        preg_match_all('/^(\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2})/', $text, $matches);
        return $matches[1][0];
    })
    ->addField('text', function($note) {
        preg_match_all('/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2} (.*)/', $text, $matches);
        return $matches[1][0];
    });
```
### Получение результата
```php
$res = $reader->getEntries();
```
Если вы не добавляли ключи, то вернётся массив разбитого на частии лога.